<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión Estudiantil</title>
    <link href="isologo.png" rel="icon">

    <!-- Incluir Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Incluir Font Awesome para los iconos de redes sociales -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <link rel="stylesheet" href="styles.css"> <!-- Archivo CSS externo -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

</head>

</html>

<body>
    <header>
        <div class="tituloInicio text-center py-5" id="inicio">
            <h1>Bienvenido al Sistema de Gestión Estudiantil</h1> <!-- Título de la página -->
    </header>

    <nav class="navbar navbar-expand-lg navbar-light bg-light shadow-sm" id="navbar"> <!-- Barra de navegación -->
        <div class="container-fluid"> <!-- Contenedor de la barra de navegación -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <!-- Botón para desplegar el menú -->
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav"> <!-- Contenido de la barra de navegación -->
                <ul class="navbar-nav"> <!-- Lista de elementos de la barra de navegación -->
                    <li class="nav-item"><a class="nav-link" href="#">Inicio</a></li>
                    <li class="nav-item"><a class="nav-link" href="/perfil.html">Perfil</a></li>
                    <li class="nav-item"><a class="nav-link" href="/en_construccion.html">Tutorial</a></li>
                </ul>
                <form class="d-flex me-3">
                    <!-- Sección de búsqueda -->
                    <input class="form-control me-2" type="search" placeholder="Buscar..." aria-label="Buscar">
                </form>
                <div class="d-flex">
                    <button class="btn btn-primary d-flex align-items-center me-2" type="button" data-bs-toggle="modal"
                        data-bs-target="#crearTpModal">
                        <i class="bi bi-file-earmark-plus me-2"></i>Crear Tp
                    </button>

                    <!-- Botón cerrar sesión -->
                    <a href="index.html" class="btn btn-primary text-white fw-semibold px-4"> Cerrar Sesión</a>
                </div>
            </div>
        </div>
    </nav>
<!-- MODAL -->
<div class="modal fade" id="crearTpModal" tabindex="-1" aria-labelledby="crearTpModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="crearTpModalLabel">Crear Trabajo Práctico</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="crearTpForm">
                    <div class="mb-3">
                        <label for="tpName" class="form-label">Nombre del TP</label>
                        <input type="text" class="form-control" id="tpName" placeholder="Ingrese el nombre del TP"
                            required>
                    </div>
                    <div class="mb-3">
                        <label for="tpCount" class="form-label">Cantidad de Puntos</label>
                        <input type="number" class="form-control" id="tpCount"
                            placeholder="Ingrese la cantidad de puntos" required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Crear</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Puntos y Sub-puntos -->
<div class="container mt-4" id="tpPointsContainer" style="display: none;">
    <h5>Puntos del Trabajo Práctico</h5>
    <div id="pointsList"></div>
    <button id="savePoints" class="btn btn-success mt-3">Guardar Puntos</button>
</div>

<section class="py-5 bg-light" id="proyectos">
    <!-- Sección de proyectos -->
    <div class="container">
        <h2 class="text-center text-primary fw-bold mb-5">Mis trabajos prácticos</h2>
        <div class="row g-4" id="trabajosPracticos">
            <!-- Trabajos prácticos generados dinámicamente aparecerán aquí -->
        </div>
    </div>
</section>
<!-- Modal para mostrar detalles del trabajo práctico -->
<div class="modal fade" id="tpDetailModal" tabindex="-1" aria-labelledby="tpDetailModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tpDetailModalLabel">Detalles del Trabajo Práctico</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="tpDetailsContainer"></div>
                <div class="progress mt-4">
                    <div class="progress-bar" id="tpProgressBar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                </div>
            </div>
        </div>
    </div>
</div>


    <footer class="footer bg-light py-5" id="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="footer-contact">
                        <img src="logo.png" alt="Logo" class="img-fluid mb-3" width="200" height="150">
                        <div class="footer-info">
                            <h3>Sistema de Gestión</h3>
                            <p><strong>Email:</strong> emailPrueba@gmail.com</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <h3>Links</h3>
                    <ul class="list-unstyled">
                        <li><a href="#inicio">Inicio</a></li>
                        <li><a href="#acercade">Acerca de</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <h3>Nuestras Redes</h3>
                    <ul class="list-unstyled">
                        <li><a href="https://www.facebook.com/" class="btn btn-outline-primary me-2"><i
                                    class="fab fa-facebook-f"></i> Facebook</a></li>
                        <li><a href="https://www.instagram.com/" class="btn btn-outline-danger me-2"><i
                                    class="fab fa-instagram"></i> Instagram</a></li>
                        <li><a href="https://www.linkedin.com/" class="btn btn-outline-primary me-2"><i
                                    class="fab fa-linkedin-in"></i> LinkedIn</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>


    <!-- Incluir Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const tpForm = document.getElementById("crearTpForm");
                const tpCountInput = document.getElementById("tpCount");
                const tpPointsContainer = document.getElementById("tpPointsContainer");
                const pointsList = document.getElementById("pointsList");
                const savePointsButton = document.getElementById("savePoints");
                const modalElement = document.getElementById("crearTpModal");
        
                let tpData = {};
        
                tpForm.addEventListener("submit", (event) => {
                    event.preventDefault(); // Evita el envío del formulario
                    const tpName = document.getElementById("tpName").value;
                    const tpCount = parseInt(tpCountInput.value);
        
                    if (tpCount > 0) {
                        tpData = {
                            name: tpName,
                            points: Array.from({ length: tpCount }, (_, i) => ({ point: i + 1, subpoints: 0 })),
                        };
        
                        generatePointsForm(tpCount);
                        tpPointsContainer.style.display = "block";
        
                        // Cerrar el modal
                        const modalInstance = bootstrap.Modal.getInstance(modalElement);
                        modalInstance.hide();
        
                        alert(`Trabajo Práctico "${tpName}" creado con éxito. Agregue los sub-puntos.`);
                    } else {
                        alert("Ingrese una cantidad válida de puntos.");
                    }
                });
        
                function generatePointsForm(count) {
                    pointsList.innerHTML = ""; // Limpiar el contenedor
                    for (let i = 1; i <= count; i++) {
                        const pointDiv = document.createElement("div");
                        pointDiv.classList.add("mb-3");
                        pointDiv.innerHTML = `
                            <label for="subpoints-${i}" class="form-label">Cantidad de Sub-puntos para Punto ${i}</label>
                            <input type="number" class="form-control" id="subpoints-${i}" placeholder="Ingrese los sub-puntos">
                        `;
                        pointsList.appendChild(pointDiv);
                    }
                }
        
                savePointsButton.addEventListener("click", () => {
                    tpData.points.forEach((point, i) => {
                        const subpointsInput = document.getElementById(`subpoints-${i + 1}`);
                        point.subpoints = parseInt(subpointsInput.value) || 0;
                    });
        
                    console.log("Trabajo Práctico Finalizado:", tpData);
                    alert(`Trabajo Práctico "${tpData.name}" con puntos y sub-puntos guardados con éxito.`);
                    tpForm.reset();
                    tpPointsContainer.style.display = "none";
                });
            });
        </script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const tpForm = document.getElementById("crearTpForm");
                const tpCountInput = document.getElementById("tpCount");
                const tpPointsContainer = document.getElementById("tpPointsContainer");
                const pointsList = document.getElementById("pointsList");
                const savePointsButton = document.getElementById("savePoints");
                const modalElement = document.getElementById("crearTpModal");
                const trabajosPracticosContainer = document.getElementById("trabajosPracticos");
            
                let tpData = {};
            
                // Cargar trabajos prácticos guardados desde localStorage
                loadTrabajosPracticos();
            
                tpForm.addEventListener("submit", (event) => {
                    event.preventDefault(); // Evita el envío del formulario
                    const tpName = document.getElementById("tpName").value;
                    const tpCount = parseInt(tpCountInput.value);
            
                    if (tpCount > 0) {
                        tpData = {
                            name: tpName,
                            points: Array.from({ length: tpCount }, (_, i) => ({ point: i + 1, subpoints: 0 })),
                        };
            
                        generatePointsForm(tpCount);
                        tpPointsContainer.style.display = "block";
            
                        // Cerrar el modal
                        const modalInstance = bootstrap.Modal.getInstance(modalElement);
                        modalInstance.hide();
            
                        alert(`Trabajo Práctico "${tpName}" creado con éxito. Agregue los sub-puntos.`);
                    } else {
                        alert("Ingrese una cantidad válida de puntos.");
                    }
                });
            
                function generatePointsForm(count) {
                    pointsList.innerHTML = ""; // Limpiar el contenedor
                    for (let i = 1; i <= count; i++) {
                        const pointDiv = document.createElement("div");
                        pointDiv.classList.add("mb-3");
                        pointDiv.innerHTML = `
                            <label for="subpoints-${i}" class="form-label">Cantidad de Sub-puntos para Punto ${i}</label>
                            <input type="number" class="form-control" id="subpoints-${i}" placeholder="Ingrese los sub-puntos">
                        `;
                        pointsList.appendChild(pointDiv);
                    }
                }
            
                savePointsButton.addEventListener("click", () => {
                    tpData.points.forEach((point, i) => {
                        const subpointsInput = document.getElementById(`subpoints-${i + 1}`);
                        point.subpoints = parseInt(subpointsInput.value) || 0;
                    });
            
                    alert(`Trabajo Práctico "${tpData.name}" con puntos y sub-puntos guardados con éxito.`);
                    addTrabajoPractico(tpData.name, `Este TP contiene ${tpData.points.length} puntos y sub-puntos.`);
                    saveTrabajoPractico(tpData);
            
                    // Resetear el formulario y ocultar la sección de puntos
                    tpForm.reset();
                    tpPointsContainer.style.display = "none";
                });
            
                function addTrabajoPractico(title, description) {
                    const colDiv = document.createElement("div");
                    colDiv.classList.add("col-md-4");
            
                    colDiv.innerHTML = `
                        <div class="card shadow-sm h-100">
                            <img src="/tp.jpeg" class="card-img-top" alt="${title}">
                            <div class="card-body">
                                <h5 class="card-title fw-bold text-dark">${title}</h5>
                                <p class="card-text text-muted">${description}</p>
                                <a href="#" class="btn btn-primary">Ver más</a>
                            </div>
                        </div>
                    `;
            
                    trabajosPracticosContainer.appendChild(colDiv);
                }
            
                function saveTrabajoPractico(tp) {
                    let trabajos = JSON.parse(localStorage.getItem("trabajosPracticos")) || [];
                    trabajos.push(tp);
                    localStorage.setItem("trabajosPracticos", JSON.stringify(trabajos));
                }
            
                function loadTrabajosPracticos() {
                    const trabajos = JSON.parse(localStorage.getItem("trabajosPracticos")) || [];
                    trabajos.forEach((tp) => {
                        addTrabajoPractico(tp.name, `Este TP contiene ${tp.points.length} puntos y sub-puntos.`);
                    });
                }
            });
            document.addEventListener("DOMContentLoaded", () => {
                const trabajosPracticosContainer = document.getElementById("trabajosPracticos");
                const tpDetailsContainer = document.getElementById("tpDetailsContainer");
                const tpProgressBar = document.getElementById("tpProgressBar");
            
                let trabajos = JSON.parse(localStorage.getItem("trabajosPracticos")) || [];
            
                function addTrabajoPractico(title, description, index) {
                    const colDiv = document.createElement("div");
                    colDiv.classList.add("col-md-4");
            
                    colDiv.innerHTML = `
                        <div class="card shadow-sm h-100">
                            <img src="/tp.jpeg" class="card-img-top" alt="${title}">
                            <div class="card-body">
                                <h5 class="card-title fw-bold text-dark">${title}</h5>
                                <p class="card-text text-muted">${description}</p>
                                <button class="btn btn-primary verMas" data-index="${index}" data-bs-toggle="modal" data-bs-target="#tpDetailModal">Ver más</button>
                            </div>
                        </div>
                    `;
            
                    trabajosPracticosContainer.appendChild(colDiv);
                }
            
                function loadTrabajosPracticos() {
                    trabajosPracticosContainer.innerHTML = "";
                    trabajos.forEach((tp, index) => {
                        addTrabajoPractico(tp.name, `Este TP contiene ${tp.points.length} puntos y sub-puntos.`, index);
                    });
                }
            
                function updateProgress(index) {
                    const tp = trabajos[index];
                    const totalItems = tp.points.reduce((sum, point) => sum + 1 + point.subpoints, 0);
                    const completedItems = tp.points.reduce((sum, point) => sum + (point.completed ? 1 : 0) + point.subCompleted, 0);
                    const progress = Math.round((completedItems / totalItems) * 100);
                    tpProgressBar.style.width = `${progress}%`;
                    tpProgressBar.setAttribute("aria-valuenow", progress);
                    tpProgressBar.textContent = `${progress}%`;
                }
            
                function openTrabajoPractico(index) {
                    const tp = trabajos[index];
                    tpDetailsContainer.innerHTML = ""; // Limpia los detalles previos
            
                    tp.points.forEach((point, pointIndex) => {
                        const pointDiv = document.createElement("div");
                        pointDiv.classList.add("mb-4");
            
                        pointDiv.innerHTML = `
                            <h5>Punto ${pointIndex + 1}</h5>
                            <label class="form-label">Imagen:</label>
                            <input type="file" class="form-control mb-2" id="image-${index}-${pointIndex}">
                            <button class="btn btn-success marcarRealizado" data-index="${index}" data-point="${pointIndex}">Marcar como realizado</button>
                        `;
            
                        tpDetailsContainer.appendChild(pointDiv);
                    });
            
                    updateProgress(index);
                }
            
                tpDetailsContainer.addEventListener("click", (event) => {
                    if (event.target.classList.contains("marcarRealizado")) {
                        const index = event.target.dataset.index;
                        const pointIndex = event.target.dataset.point;
                        const tp = trabajos[index];
            
                        tp.points[pointIndex].completed = true;
                        localStorage.setItem("trabajosPracticos", JSON.stringify(trabajos));
                        updateProgress(index);
                    }
                });
            
                trabajosPracticosContainer.addEventListener("click", (event) => {
                    if (event.target.classList.contains("verMas")) {
                        const index = event.target.dataset.index;
                        openTrabajoPractico(index);
                    }
                });
            
                loadTrabajosPracticos();
            });
            
        </script>
</body>



</html>